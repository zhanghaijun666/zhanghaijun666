import{_ as n,C as l,c as e,o as t,j as i,G as p,a5 as h,a as k}from"./chunks/framework.CBqkjkG0.js";const F=JSON.parse('{"title":"本地知识库+本地大模型","description":"","frontmatter":{},"headers":[],"relativePath":"101_项目管理/31_业务赋能/本地知识库+本地大模型.md","filePath":"101_项目管理/31_业务赋能/本地知识库+本地大模型.md","lastUpdated":1739184584000}'),r={name:"101_项目管理/31_业务赋能/本地知识库+本地大模型.md"};function d(o,s,c,g,y,b){const a=l("ArticleMetadata");return t(),e("div",null,[s[0]||(s[0]=i("h1",{id:"本地知识库-本地大模型",tabindex:"-1"},[k("本地知识库+本地大模型 "),i("a",{class:"header-anchor",href:"#本地知识库-本地大模型","aria-label":'Permalink to "本地知识库+本地大模型"'},"​")],-1)),p(a),s[1]||(s[1]=h(`<h2 id="一-使用自带的-wsl-安装-ubuntu-22-04-系统" tabindex="-1">一 使用自带的 WSL 安装 Ubuntu-22.04 系统 <a class="header-anchor" href="#一-使用自带的-wsl-安装-ubuntu-22-04-系统" aria-label="Permalink to &quot;一 使用自带的 WSL 安装 Ubuntu-22.04 系统&quot;">​</a></h2><p>1、启用window子系统及虚拟化</p><blockquote><p>win + r 键入 OptionalFeatures，直接打开，开启<code>Hyper-V</code>、<code>Windows虚拟机监控程序平台</code>、<code>容器</code>、<code>适用于Linux的Windows子系统</code>。</p></blockquote><p>2、将wsl，升级为wsl2</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --update</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #升级到最新版本（wsl2）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --list</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --online</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 查看所有可用的发行版</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --install</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 安装 Ubuntu-22.04 系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -l</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> # 显示当前安装了哪些系统</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --set-default-version</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #设置wsl默认版本为wsl2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --set-version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #设置Ubuntu-22.04为 wsl2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl.exe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --set-version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #设置为wsl1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #登录到Ubuntu环境</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wsl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --shutdown</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #关闭Ubuntu-22.04</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wslconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /list</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看wsl配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wslconfig</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /setdefault</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Ubuntu-22.04</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #设置默认的wsl系统</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>3、启动操作安装的linux</p><p>使用 wsl：在 cmd（或powershell）输入 wsl（或者：wsl -d Ubuntu-22.04）</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/os-release</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #查看 Linux 的版本</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置时区命令</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timedatectl</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> timedatectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-timezone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timedatectl</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="二-安装win桌面版docker" tabindex="-1">二 安装win桌面版docker <a class="header-anchor" href="#二-安装win桌面版docker" aria-label="Permalink to &quot;二 安装win桌面版docker&quot;">​</a></h2><p>win桌面版 地址: &lt;www.docker.com/products/docker-desktop/&gt;</p><h2 id="三-部署启动ragflow" tabindex="-1">三 部署启动<code>ragflow</code> <a class="header-anchor" href="#三-部署启动ragflow" aria-label="Permalink to &quot;三 部署启动\`ragflow\`&quot;">​</a></h2><p><code>ragflow</code>仓库：<a href="https://github.com/infiniflow/ragflow/blob/main/README_zh.md" target="_blank" rel="noreferrer">https://github.com/infiniflow/ragflow/blob/main/README_zh.md</a></p><blockquote><p>软硬件要求：</p><p>硬件：CPU ≥ 4 核 ; 内存≥ 16 GB; 磁盘空间 ≥ 50 GB; 软件：</p><p>Docker版本 ≥ 24.0.0 ；Docker Compose 版本 ≥ v2.26.1</p></blockquote><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 1 克隆仓库</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://github.com/infiniflow/ragflow.git</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 2 使用Docker镜像启动服务器（45 GB左右，约2小时左右）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">修改./docker/.env的45行，把HF_ENDPOINT</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 设成相应的镜像站点</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">HF_ENDPOINT</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">https://hf-mirror.com</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">cd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ragflow/docker</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">chmod</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +x</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ./entrypoint.sh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> compose</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-compose.yml</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> up</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -d</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 3 确认服务器状态</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> logs</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ragflow-server</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="四-安装本地大模型llm" tabindex="-1">四 安装本地大模型LLM <a class="header-anchor" href="#四-安装本地大模型llm" aria-label="Permalink to &quot;四 安装本地大模型LLM&quot;">​</a></h2><p>安装<code>ollama</code>(一步步点就行) 地址：<a href="https://www.ollama.com/" target="_blank" rel="noreferrer">https://www.ollama.com/</a></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #列出模型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> run</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> qwen2:7b</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"> #下载运行模型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> rm</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">          #删除模型</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">  #显示模型信息</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>下载<code>Embedding</code>模型 说明：一个免费的中文的向量化模型</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> pull</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> shaw/dmeta-embedding-zh</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ollama</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> list</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>最后用浏览器打开 <code>http://localhost:11434</code> 可以看到页面中显示：<code>Ollama is running</code></p>`,20))])}const u=n(r,[["render",d]]);export{F as __pageData,u as default};
